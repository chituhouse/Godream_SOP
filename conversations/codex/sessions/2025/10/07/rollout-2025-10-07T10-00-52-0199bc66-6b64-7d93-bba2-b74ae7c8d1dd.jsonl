{"timestamp":"2025-10-07T02:00:52.847Z","type":"session_meta","payload":{"id":"0199bc66-6b64-7d93-bba2-b74ae7c8d1dd","timestamp":"2025-10-07T02:00:52.836Z","cwd":"/Users/yunchang/Documents/AI 编程/鸽梦（无 ops）","originator":"codex_cli_rs","cli_version":"0.41.0","instructions":"# AGENTS.md\n\nThis file provides guidance to agents when working with code in this repository.\n\n## 项目特异性约束\n\n**火山引擎API限制**：严禁AK/SK模式，必须使用APIKEY方式（模块强制检查）\n**双路径存储策略**：同时保存相对路径+绝对路径，支持根目录迁移后自动重连\n**Serena MCP同步要求**：断连时禁止私自执行，必须重连同步上下文记忆\n**项目状态核实原则**：文档声称的\"已完成\"状态需实际验证，Day4等文档可能与实际集成状态不符\n\n## 非标准工具链\n\n```bash\n# Python 3.13专用依赖（不兼容标准requirements.txt）\npip install -r requirements_py313.txt\n\n# 详细诊断（环境变量+配置文件双重控制）\nGEMENG_DIAG_VERBOSE=1 python tools/system_diagnosis.py\n\n# 字体硬编码自动修复\npython tools/style_migration_tool.py --dry-run\n```\n\n## 隐藏架构约束\n\n**_ensure_import_paths()动态路径注入**：\n- gemeng_root（开发） + parent_of_gemeng（部署）双导入策略\n- 所有tools/脚本顶部必须调用此函数\n\n**utils/logger.py脱敏系统**：\n- 条件性loguru patcher参数使用（版本兼容性检查）\n- 自动识别API密钥、base64数据并屏蔽\n- 预定义模块专用logger：seedream_logger, seedance_logger等\n\n## 强制约定\n\n**删除前归档规则**：任何文件删除前必须移动到`/archive/retired_*`目录\n**存储真源统一**：GUI与脚本共用`config_api.get_storage_dir()`，避免路径分歧\n**Mac平台特殊处理**：`platform.system() == \"Darwin\"`检测后启用Cmd快捷键和字体缩放\n","git":{"commit_hash":"d75ab677e71b3285fbfdd585fa1f1615eca07ca8","branch":"release/v0.7.0","repository_url":"https://github.com/chituhouse/gemeng2.git"}}}
{"timestamp":"2025-10-07T02:00:57.266Z","type":"response_item","payload":{"type":"message","role":"user","content":[{"type":"input_text","text":"<user_instructions>\n\n# AGENTS.md\n\nThis file provides guidance to agents when working with code in this repository.\n\n## 项目特异性约束\n\n**火山引擎API限制**：严禁AK/SK模式，必须使用APIKEY方式（模块强制检查）\n**双路径存储策略**：同时保存相对路径+绝对路径，支持根目录迁移后自动重连\n**Serena MCP同步要求**：断连时禁止私自执行，必须重连同步上下文记忆\n**项目状态核实原则**：文档声称的\"已完成\"状态需实际验证，Day4等文档可能与实际集成状态不符\n\n## 非标准工具链\n\n```bash\n# Python 3.13专用依赖（不兼容标准requirements.txt）\npip install -r requirements_py313.txt\n\n# 详细诊断（环境变量+配置文件双重控制）\nGEMENG_DIAG_VERBOSE=1 python tools/system_diagnosis.py\n\n# 字体硬编码自动修复\npython tools/style_migration_tool.py --dry-run\n```\n\n## 隐藏架构约束\n\n**_ensure_import_paths()动态路径注入**：\n- gemeng_root（开发） + parent_of_gemeng（部署）双导入策略\n- 所有tools/脚本顶部必须调用此函数\n\n**utils/logger.py脱敏系统**：\n- 条件性loguru patcher参数使用（版本兼容性检查）\n- 自动识别API密钥、base64数据并屏蔽\n- 预定义模块专用logger：seedream_logger, seedance_logger等\n\n## 强制约定\n\n**删除前归档规则**：任何文件删除前必须移动到`/archive/retired_*`目录\n**存储真源统一**：GUI与脚本共用`config_api.get_storage_dir()`，避免路径分歧\n**Mac平台特殊处理**：`platform.system() == \"Darwin\"`检测后启用Cmd快捷键和字体缩放\n\n\n</user_instructions>"}]}}
{"timestamp":"2025-10-07T02:00:57.266Z","type":"response_item","payload":{"type":"message","role":"user","content":[{"type":"input_text","text":"<environment_context>\n  <cwd>/Users/yunchang/Documents/AI 编程/鸽梦（无 ops）</cwd>\n  <approval_policy>on-request</approval_policy>\n  <sandbox_mode>workspace-write</sandbox_mode>\n  <network_access>restricted</network_access>\n  <shell>zsh</shell>\n</environment_context>"}]}}
