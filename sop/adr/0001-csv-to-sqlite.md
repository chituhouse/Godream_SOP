# ADR 0001: CSV → SQLite（数据层迁移）

## 状态
- 接受（Accepted）

## 背景（Context）
- 早期以 CSV 作为历史记录/元数据存储，随着数据量增加出现性能与可维护性瓶颈。
- 需求逐步从“记录”升级为“资产”：需要检索、筛选、对比、迁移与继承。

## 决策（Decision）
- 迁移到 SQLite 作为本地元数据存储。
- 保持“本地优先”，不引入公有云依赖。

## 影响（Consequences）
### 正面
- 查询与筛选能力显著提升（更适合资产化工作流）。
- 数据结构更可演进，便于后续扩展字段（参数追踪、任务状态等）。
### 负面 / 风险
- 迁移成本：老数据迁移、兼容、回滚策略。
- 并发写入边界：在 NAS 协作场景需要流程约束。
### 缓解措施
- 渐进式迁移：先双写/兼容，再切换为主存储（以实际实现为准）。
- 明确 NAS 协作边界：更适合 3–10 人小团队，强调流程约束（见营销口径真源）。

## 备选方案（Alternatives）
- 继续 CSV：实现成本低，但检索/性能与演进能力不足。
- 引入云端数据库：不符合“本地优先/数据不出公司”的产品边界。

## 证据与来源（References）
- 里程碑：`timeline.md`（v1.2.0 期间完成 SQLite 迁移）

